document.addEventListener('DOMContentLoaded', () => {
  const cards = Array.from(document.querySelectorAll('.card'));
  let idx = 0;
  const startBtn = document.getElementById('startBtn');
  const prev = document.getElementById('prev');
  const next = document.getElementById('next');
  const qrLink = document.getElementById('qrLink');
  const controls = document.getElementById('controls');

  function show(i) {
    cards.forEach(c => c.classList.remove('active'));
    const n = (i + cards.length) % cards.length;
    cards[n].classList.add('active');
    idx = n;
  }

  // autoplay once when Start clicked
  startBtn.addEventListener('click', () => {
    show(0);
    let rounds = 0;
    const t = setInterval(() => {
      show(idx + 1);
      if (idx === cards.length - 1) rounds++;
      if (rounds >= 1) {
        clearInterval(t);
        // allow manual controls after autoplay
        if (controls) controls.style.display = 'flex';
      }
    }, 2500);
    // hide manual controls during autoplay
    if (controls) controls.style.display = 'none';
  });

  prev && prev.addEventListener('click', () => show(idx - 1));
  next && next.addEventListener('click', () => show(idx + 1));

  // placeholder QR â€” if you deployed to GitHub Pages the placeholder should be replaced with your URL
  const placeholder = 'https://ybtsir.github.io/newVideo/';
  qrLink.href = `https://chart.googleapis.com/chart?cht=qr&chs=350x350&chl=${encodeURIComponent(placeholder)}`;
});
